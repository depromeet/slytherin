package com.bobeat.backend.domain.security.oauth;

import com.bobeat.backend.domain.member.repository.MemberRepository;
import java.util.List;
import java.util.Random;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Component;

@Component
@RequiredArgsConstructor
public class NicknameGenerator {

    private final MemberRepository memberRepository;

    // 6자 이하의 형용사 리스트
    private static final List<String> ADJECTIVES = List.of(
            "배고픈", "잠자는", "춤추는", "뛰어난", "멍때리는", "방황하는", "흥분한", "뚝딱이는",
            "뚜벅이는", "겁먹은", "꿈꾸는", "소심한", "엉뚱한", "반항적인", "황당한", "수줍은",
            "허둥대는", "슬기로운", "헝클어진", "엄청난", "튕기는", "좌절한", "행복한", "슬픈",
            "즐거운", "화나는", "졸린", "신나는", "우울한", "궁금한", "달리는", "방구뀐", "게으른",
            "용감한", "배부른", "목마른", "당황한", "느긋한", "성급한", "진지한", "어설픈", "산만한", "똑똑한",
            "검소한", "경건한", "겸손한", "공평한", "관대한", "교활한", "깔끔한", "꼼꼼한", "꾸준한",
            "날렵한", "낭만적", "냉정한", "너그러운", "단순한", "단호한", "대담한", "덤벙대는", "독창적",
            "동글동글", "따뜻한", "똘똘한", "뚱뚱한", "매력적", "매정한", "명랑한", "모범적", "무관심",
            "무뚝뚝", "믿음직", "바보같은", "반짝이는", "발랄한", "방정맞은", "보수적", "부드러운", "부지런한",
            "분주한", "불안한", "불친절", "사나운", "사악한", "산만한", "상냥한", "새침한", "서투른",
            "성급한", "성실한", "소박한", "솔직한", "수줍은", "순진한", "시무룩", "시원한", "신비한",
            "신중한", "심각한", "씩씩한", "아찔한", "안쓰러운", "얌전한", "얄미운", "어두운", "어설픈",
            "어지러운", "억울한", "엄격한", "엉뚱한", "에너제틱", "여유로운", "연약한", "열정적", "영리한",
            "영악한", "예민한", "오만한", "온순한", "완고한", "완벽한", "왕성한", "요란한", "우아한",
            "우울한", "원만한", "위험한", "유명한", "유치한", "육중한", "으스대는", "응큼한", "이기적",
            "자유로운", "잔인한", "잘생긴", "재빠른", "적극적", "정직한", "정확한", "조용한", "졸린",
            "즉흥적", "지루한", "진지한", "짜릿한", "쪼잔한", "처량한", "청결한", "초조한", "충동적",
            "친절한", "침착한", "쾌활한", "털털한", "투명한", "특별한", "편안한", "포근한", "폭신한", "피곤한",
            "가냘픈", "가벼운", "가혹한", "간사한", "간절한", "감미로운", "감사한", "거대한", "거만한",
            "거친", "건강한", "건방진", "검은", "격렬한", "경쾌한", "고급스러운", "고달픈", "고독한",
            "고소한", "고요한", "고운", "고집센", "곤란한", "공손한", "과감한", "과묵한", "광활한",
            "괴팍한", "굉장한", "구체적인", "귀찮은", "귀여운", "그리운", "극단적인", "급격한", "긍정적",
            "기괴한", "기운찬", "길쭉한", "까다로운", "깐깐한", "깜찍한", "깨끗한", "끈질긴", "끝없는",
            "나쁜", "나약한", "난처한", "날카로운", "남다른", "낯선", "내성적", "냉담한", "넓은",
            "네모난", "노곤한", "놀라운", "느린", "능글맞은", "능동적", "능숙한", "다급한", "다정한",
            "단단한", "단아한", "달콤한", "담백한", "당돌한", "당당한", "대단한", "도도한", "독단적",
            "독특한", "돈독한", "동그란", "두꺼운", "둥근", "따가운", "딱딱한", "매끄러운", "매운",
            "매혹적", "맹렬한", "맹한", "먼", "멋진", "멍청한", "메마른", "무거운", "무관심한",
            "무기력", "무례한", "무서운", "무심한", "무표정", "묵직한", "문학적", "뭉툭한", "미끄러운",
            "미묘한", "미세한", "미숙한", "미지근한", "민감한", "민첩한", "밀접한", "바람직한", "바쁜",
            "반가운", "반듯한", "밝은", "방자한", "배려심", "버릇없는", "벅찬", "번거로운", "별난",
            "병약한", "보드라운", "보람찬", "복잡한", "볼록한", "부끄러운", "부당한", "부유한", "부주의한",
            "분노한", "불길한", "불쾌한", "불편한", "비관적", "비굴한", "비범한", "비슷한", "비싼",
            "비장한", "비참한", "빠른", "뻔뻔한", "뾰로통한", "뾰족한", "뿌듯한", "뿌연", "사소한",
            "산뜻한", "살찐", "상스러운", "상큼한", "상쾌한", "새로운", "새하얀", "서먹한", "서운한",
            "서툰", "선명한", "선선한", "선한", "섬세한", "성가신", "세련된", "소란한", "속상한",
            "솔깃한", "수동적", "순박한", "순수한", "순응적", "습한", "승부욕", "시끄러운", "시큼한",
            "시큰둥한", "신속한", "신선한", "실용적", "싫은", "심심한", "싱거운", "싱싱한", "싸가지",
            "싸늘한", "싼", "쓸쓸한", "씁쓸한", "아늑한", "아름다운", "아쉬운", "악랄한", "안락한",
            "안타까운", "알뜰한", "알맞은", "애매한", "애절한", "애처로운", "야릇한", "야비한", "야속한",
            "야심찬", "약한", "얇은", "어리석은", "어린", "어색한", "어이없는", "억센", "언짢은",
            "얼빠진", "얼얼한", "엄숙한", "엉성한", "여린", "역겨운", "열렬한", "열심인", "열악한",
            "영원한", "예리한", "예쁜", "오래된", "오묘한", "오붓한", "오싹한", "올바른", "와일드",
            "완강한", "완만H", "외로운", "요염한", "우둔한", "우람한", "우월한", "우직한", "웅장한",
            "원대한", "월등한", "위대한", "유능한", "유연한", "유용한", "유쾌한", "윤기나는", "은밀한",
            "은은한", "음산한", "음흉한", "의로운", "의연한", "이국적", "이성적", "이타적", "익숙한",
            "인색한", "인자한", "일관된", "자비로운", "자상한", "자신있는", "잔잔한", "잔혹한", "잘난",
            "잠잠한", "재미있는", "저렴한", "적막한", "적절한", "절묘한", "절박한", "절실한", "정겨운",
            "정다운", "정숙한", "정의로운", "정중한", "조심스러운", "조촐한", "존귀한", "존엄한", "좁은",
            "좋은", "주관적", "주요한", "지독한", "지저분한", "지친", "지혜로운", "진실한", "진취적",
            "질긴", "짓궂은", "짜증나는", "짧은", "차가운", "차분한", "착한", "찬란한", "참신한",
            "창의적", "책임감", "천박한", "청순한", "청아한", "초라한", "촉촉한", "총명한", "추잡한",
            "추한", "축축한", "충격적", "충분한", "측은한", "치밀한", "치사한", "친근한", "친숙한",
            "침울한", "캄캄한", "커다란", "컴컴한", "쾌적한", "큰", "탐스러운", "특별한", "튼튼한",
            "파란", "편리한", "평범한", "평화로운", "포악한", "폭력적", "푸른", "푸짐한", "풋풋한",
            "풍부한", "풍성한", "한가로운", "한심한", "허름한", "허무한", "허약한", "헌신적", "험악한",
            "현명한", "화려한", "화목한", "확실한", "활기찬", "황홀한", "흐릿한", "흥미로운", "흰"
    );

    // 4자 이하의 명사(음식) 리스트
    private static final List<String> FOODS = List.of(
            "피자", "치킨", "햄버거", "떡볶이", "파스타", "삼겹살", "초밥", "라면", "카레", "돈까스",
            "우동", "짜장면", "비빔밥", "샐러드", "타코", "쌀국수", "마라탕", "양꼬치", "곱창", "막창",
            "족발", "보쌈", "감자탕", "와플", "마카롱", "붕어빵", "호떡", "탕후루", "도넛", "팥빙수",
            "케이크", "베이글", "김밥", "순대", "튀김", "어묵", "갈비탕", "설렁탕", "육개장", "찜닭",
            "닭갈비", "불고기", "잡채", "갈비", "냉면", "콩국수", "수제비", "칼국수", "볶음밥", "리조또",
            "그라탕", "샥슈카", "팟타이", "푸딩", "요거트", "스무디", "주먹밥", "핫도그", "시리얼", "토스트", "스콘",
            "찐빵", "약과", "정과", "강정", "한과", "경단", "인절미", "백설기", "꿀떡", "송편",
            "시루떡", "약밥", "식혜", "수정과", "보리차", "녹차", "홍차", "우유", "두유", "주스",
            "에이드", "콜라", "사이다", "맥주", "소주", "막걸리", "와인", "양주", "칵테일", "보드카",
            "위스키", "사케", "고량주", "물만두", "군만두", "찐만두", "왕만두", "계란빵", "국화빵", "땅콩빵",
            "보리빵", "술빵", "호두과자", "누룽지", "건빵", "새우깡", "감자깡", "양파링", "콘칩", "꼬깔콘",
            "치토스", "썬칩", "포스틱", "자갈치", "짱구", "칸쵸", "홈런볼", "웨하스", "빈츠", "다이제",
            "오예스", "초코파이", "몽쉘", "빅파이", "배", "사과", "귤", "밤", "감", "딸기", "포도",
            "복숭아", "자두", "수박", "멜론", "참외", "바나나", "망고", "키위", "레몬", "오렌지",
            "자몽", "체리", "무화과", "석류", "대추", "매실", "유자", "모과", "오미자", "복분자",
            "알로에", "코코넛", "파파야", "용과", "리치", "두리안", "람부탄", "김", "낯", "떡", "무",
            "밥", "빵", "술", "쌀", "알", "엿", "잎", "죽", "차", "채", "콩", "팥", "풀", "꿀",
            "잣", "즙", "초", "국", "국수", "묵", "밀", "팥", "힘", "갓", "술", "전", "김치",
            "깍두기", "깻잎", "상추", "마늘", "고추", "양파", "파", "생강", "무순", "새싹",
            "버섯", "미역", "다시마", "파래", "매생이", "우무", "한천", "당면", "소면", "중면",
            "쫄면", "라면", "칼면", "수프", "스튜", "잼", "버터", "치즈", "크림", "마요", "케첩",
            "소금", "설탕", "식초", "간장", "된장", "고추장", "쌈장", "액젓", "젓갈", "새우젓",
            "명란젓", "오징어젓", "낙지젓", "창란젓", "소라", "전복", "굴", "멍게", "해삼", "개불",
            "홍합", "가리비", "키조개", "새우", "대게", "킹크랩", "랍스터", "게", "꽃게", "멸치",
            "꽁치", "고등어", "갈치", "조기", "명태", "동태", "북어", "황태", "코다리", "참치",
            "연어", "광어", "우럭", "도미", "방어", "숭어", "장어", "문어", "오징어", "낙지",
            "쭈꾸미", "한치", "꼴뚜기", "소고기", "돼지고기", "닭고기", "오리고기", "양고기", "말고기", "염소",
            "사슴", "토끼", "개구리", "자라", "메추리알", "계란", "오리알", "타조알", "캐비어", "트러플",
            "올리브", "아보카도",
            "강냉이", "건포도", "과자", "구이", "국밥", "군밤", "군고구마", "귤칩", "껌", "꼬치",
            "나물", "냉국", "냉채", "너겟", "너비아니", "노른자", "누룽지탕", "눈깔사탕", "다식", "단무지",
            "단팥빵", "달고나", "닭강정", "닭꼬치", "닭발", "당근", "대창", "더덕", "도라지", "도토리묵",
            "동그랑땡", "동치미", "두부", "들깨", "등심", "땅콩", "떡갈비", "떡국", "떡꼬치", "라면땅",
            "전", "면", "롤", "묵", "밥", "밤", "배", "배추", "백반", "보리",
            "볶음", "부각", "부침개", "북엇국", "비빔면", "빙수", "빵", "사탕", "산적", "삼계탕",
            "새알", "생채", "샤베트", "소바", "소시지", "송이", "수육", "숙주", "순두부", "술밥",
            "숭늉", "슈크림", "스팸", "시금치", "쌈", "아귀찜", "안심", "알밥", "알칩", "애호박",
            "앵두", "야채", "약식", "양갱", "양념", "양배추", "양송이", "어묵탕", "얼음", "오뎅",
            "오이", "옥수수", "완자", "왕밤", "우엉", "우족", "육포", "율무", "음료", "이온",
            "인삼", "자반", "잡곡", "잣죽", "장조림", "장", "전병", "젓", "젤리", "조림",
            "조청", "죽", "쥐포", "차", "참깨", "참쌀", "채소", "천엽", "청포묵", "초장",
            "추러스", "추어탕", "츄잉껌", "치즈볼", "칡", "콩", "콩국", "콩밥", "콩자반", "탕",
            "탕평채", "토란", "토마토", "파이", "팥", "팥죽", "팽이버섯", "편육", "편", "포",
            "푸아그라", "피클", "필라프", "하리보", "한우", "핫바", "해물", "해초", "향신료", "현미",
            "호두", "호박", "홍삼", "홍시", "화채", "환", "활어", "황도", "회", "후추",
            "훠궈", "흰자", "아귀", "아욱", "알", "밤", "밥", "배", "백미", "버거",
            "보쌈", "보리", "비트", "빵", "뻔데기", "사과", "살구", "살라미", "살", "삼치",
            "갓", "감", "감자", "강", "건", "게", "견과", "경단", "계란", "고구마",
            "고기", "고사리", "곡", "과일", "광어", "구", "굴", "귤", "근",
            "금귤", "기장", "김", "깨", "깻잎", "꼬막", "꿀", "꿩", "나물", "나쵸",
            "날치알", "냉이", "너트", "다시마", "단감", "단호박", "달래", "닭", "당", "대구",
            "대추", "더덕", "도라지", "도미", "동", "동태", "두릅", "딸기", "땅콩", "떡",
            "라임", "레몬", "로", "마", "막걸리", "만두", "망고", "매실", "맥", "맥주",
            "메밀", "메추리", "멜론", "멸", "멸치", "명태", "모과", "모시", "목", "무",
            "무화과", "묵", "문어", "물", "미나리", "미숫", "미역", "밀", "바나나", "바밤바",
            "바지락", "박", "밥", "방어", "배", "배추", "백", "버섯", "버터", "번",
            "보리", "복", "복숭아", "부추", "북", "북어", "분", "분유", "비", "비지",
            "사과", "사시미", "산", "산삼", "산", "살", "살구", "살", "삼", "삼겹",
            "삼치", "상", "상추", "새", "새우", "생", "생강", "생", "샤", "서",
            "석", "석류", "선", "선지", "설", "설탕", "섬", "성", "성게", "세",
            "소", "소금", "소", "소라", "소", "소시지", "송", "송이", "수", "수",
            "수박", "순", "순대", "숭", "숭어", "술", "쌀", "쑥", "아", "아귀",
            "안", "안심", "알", "알로에", "애", "애호박", "앵", "앵두", "야", "야채",
            "약", "약과", "양", "양파", "양", "어", "어묵", "연", "연근", "연어",
            "엿", "오", "오디", "오이", "옥", "옥수수", "온", "올", "완", "완두",
            "왕", "요", "요구르트", "용", "용과", "우", "우동", "우엉", "우유", "운",
            "원", "월", "유", "유자", "육", "육포", "율", "율무", "음", "음료",
            "이", "인", "인삼", "일", "잎", "자", "자두", "자몽", "자반", "잣",
            "장", "장어", "잼", "전", "전복", "전", "젓", "젓갈", "정",
            "조", "조개", "조기", "족", "족발", "좁", "좁쌀", "종", "주", "주꾸미",
            "주스", "죽", "준", "줄", "즙", "증", "지", "진", "진", "질",
            "짐", "집", "징", "차", "참", "참깨", "참외", "참", "참치",
            "찹", "찹쌀", "창", "창란젓", "채", "채소", "책", "처", "천", "천엽",
            "청", "청국장", "청", "체", "체리", "초", "초밥", "초", "총", "추",
            "추", "치", "치즈", "칡", "콩", "콩나물", "콩", "타", "타", "탕",
            "태", "토", "토란", "토마토", "통", "파", "파", "파래", "파이", "판",
            "팥", "팥", "팽", "팽이", "편", "편육", "포", "포도", "폭", "표",
            "표고", "푸", "풀", "피", "피망", "하", "한", "한우", "핫",
            "핫바", "해", "해물", "해", "해삼", "햄", "향", "현", "현미",
            "호", "호두", "호박", "호", "홍", "홍합", "홍", "화", "화", "환",
            "황도", "황", "회", "후", "후추", "훠", "훠궈", "흰"
    );

    private static final Random RANDOM = new Random();

    public String getRandomNickname() {
        // 총 조합 수 (약 480 * 500 = 250,000+)에 맞춰 시도 횟수 증가
        final int maxAttempts = 50000; // 5만 번 시도

        for (int attempts = 0; attempts < maxAttempts; attempts++) {
            String adjective = ADJECTIVES.get(RANDOM.nextInt(ADJECTIVES.size()));
            String food = FOODS.get(RANDOM.nextInt(FOODS.size()));
            String nickName = adjective + " " + food;

            // 11자 이하 체크 및 DB 중복 체크
            if (nickName.length() <= 11 && !memberRepository.existsByNickname(nickName)) {
                return nickName;
            }
        }

        // 5만 번 시도 후에도 실패하면, 그때는 예외 발생
        throw new IllegalStateException("중복되지 않는 닉네임 생성에 실패했습니다 (11자 제한)");
    }
}
